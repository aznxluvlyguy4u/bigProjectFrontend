<div class="page-header">
    <div class="page-title">{{ 'CLIENT INFORMATION' | translate }}</div>
</div>

<div class="row table-options-container">
    <div class="large-2 columns">
        <button (click)="navigateTo('/client')" class="small primary button expanded">
            <i class="fa fa-chevron-left" aria-hidden="true"></i>
            {{ 'CLIENT OVERVIEW' | translate }}
        </button>
    </div>

    <div class="large-6 columns">
        <span class="pull-right">
            <button class="small primary button">
                <i class="fa fa-list-alt" aria-hidden="true"></i>
                {{ 'LIVESTOCK' | translate }}
            </button>

            <button (click)="loginAsGhost()" class="small primary button">
                <i class="fa fa-sign-in fa-fw" aria-hidden="true"></i>
                {{ 'LOGIN' | translate }}
            </button>

            <button (click)="navigateTo('/client/dossier/edit/' + clientId)" class="small primary button">
                <i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>
                {{ 'EDIT' | translate }}
            </button>

            <button class="small alert button">
                <i class="fa fa-ban fa-fw" aria-hidden="true"></i>
                {{ 'DEACTIVATE' | translate }}
            </button>
        </span>
    </div>
</div>


<div class="row">
    <div class="large-3 columns">
        <div class="client-info-overview">
            <div class="general">
                <div>{{ clientDetails.company_name }}</div>
                <div>{{ clientDetails.address.street_name + ' ' + clientDetails.address.address_number + ' ' + clientDetails.address.suffix }} </div>
                <div>{{ clientDetails.address.postal_code + ' ' + clientDetails.address.city }}</div>
            </div>

            <label>{{ 'TELEPHONE NUMBER' | translate }}</label>
            <div class="value">{{ clientDetails.telephone_number }}</div>

            <label>{{ 'PRIMARY CONTACT PERSON' | translate }}</label>
            <div class="value">{{ clientDetails.primary_contactperson.prefix | translate }} {{ clientDetails.primary_contactperson.first_name + ' ' + clientDetails.primary_contactperson.last_name }}</div>
            <div class="value">{{ clientDetails.primary_contactperson.email_address }}</div>

            <label>{{ 'STATUS' | translate }}</label>
            <div class="value">{{ clientDetails.status | translate }}</div>

            <label>{{ 'SUBSCRIPTION DATE' | translate }}</label>
            <div class="value"> {{ settings.convertToViewDate(clientDetails.subscription_date) }}</div>
        </div>
        <div class="client-info-overview">
            <table>
                <thead>
                <tr>
                    <td>{{ 'AMOUNT AVAILABLE ANIMALS' | translate }}</td>
                    <td>{{ 'RAM' | translate }}</td>
                    <td>{{ 'EWE' | translate }}</td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>< 6 {{ 'MONTHS' | translate }}</td>
                    <td>{{ clientDetails.livestock.ram.less_6_months }}</td>
                    <td>{{ clientDetails.livestock.ewe.less_6_months }}</td>
                </tr>
                <tr>
                    <td>6 - 12 {{ 'MONTHS' | translate }}</td>
                    <td>{{ clientDetails.livestock.ram.between_6_12_months }}</td>
                    <td>{{ clientDetails.livestock.ewe.between_6_12_months }}</td>
                </tr>
                <tr>
                    <td> > 12 {{ 'MONTHS' | translate }}</td>
                    <td>{{ clientDetails.livestock.ram.greater_12_months }}</td>
                    <td>{{ clientDetails.livestock.ewe.greater_12_months }}</td>
                </tr>
                <tr>
                    <td>{{ 'TOTAL' | translate }}</td>
                    <td>{{ clientDetails.livestock.ram.total }}</td>
                    <td>{{ clientDetails.livestock.ewe.total }}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="client-info-overview">
            <table>
                <thead>
                    <tr>
                        <td colspan="2">{{ 'BREEDER NUMBERS' | translate }}</td>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let number of clientDetails.breeder_numbers">
                        <td>{{ number.number }}</td>
                        <td>{{ number.code }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="large-6 columns">
        <div class="row">
            <div class="large-12 columns">
                <div class="table-title">
                    <label> {{ 'INVOICES' | translate }} </label>
                </div>

                <table class="client-info-table">
                    <thead>
                        <tr>
                            <td>{{ 'INVOICE' | translate }} # </td>
                            <td>{{ 'INVOICE DATE' | translate }}</td>
                            <td>{{ 'STATUS' | translate }}</td>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let invoice of clientDetails.invoices">
                            <td> {{ invoice.invoice_number }} </td>
                            <td> {{ settings.convertToViewDate(invoice.invoice_date) }} </td>
                            <td>
                                <span *ngIf="invoice.status == 'PAID'" class="success label">
                                    {{ invoice.status | translate }}
                                </span>
                                <span *ngIf="invoice.status == 'UNPAID'" class="alert label">
                                    {{ invoice.status | translate }}
                                </span>
                            </td>
                            <td>
                                <a class="icon-link" href="{{ invoice.pdf_url }}" target="_blank"><i class="fa fa-file-pdf-o fa-fw" aria-hidden="true"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <div class="table-title">
                    <label> {{ 'ANIMAL HEALTH' | translate }} <span> ({{ 'FINISHED INSPECTIONS' | translate }}) </span></label>
                </div>

                <table class="client-info-table">
                    <thead>
                        <tr>
                            <td>{{ 'UBN' | translate }}</td>
                            <td>{{ 'NAME' | translate }}</td>
                            <td>{{ 'INSPECTION' | translate }}</td>
                            <td>{{ 'REQUEST DATE' | translate }}</td>
                            <td>{{ 'DIRECTION DATE' | translate }}</td>
                            <td>{{ 'TOTAL LEAD TIME' | translate }}</td>
                            <td>{{ 'AUTHORIZED BY' | translate }}</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let health of clientDetails.animal_health">
                            <td>{{ health.ubn }}</td>
                            <td>{{ health.name }}</td>
                            <td>{{ health.inspection | translate }}</td>
                            <td>{{ settings.convertToViewDate(health.request_date) }}</td>
                            <td>
                                <span *ngFor="let direction of health.directions">
                                    {{ direction.type  | translate }}: <br> {{ settings.convertToViewDate(direction.date)}} <br><br>
                                </span>
                            </td>
                            <td>{{ health.total_lead_time }}</td>
                            <td>{{ health.authorized_by }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="large-3 columns">
        <div class="row">
            <div class="large-12 columns notes">
                <label>
                    {{ 'NOTES' | translate }}
                    <textarea [(ngModel)]="clientNote.message" rows="7"></textarea>
                </label>
                <button type="button" (click)="addClientNote()" class="small primary button expanded">{{ 'SAVE' | translate }}</button>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <table class="notes-table">
                    <tbody>
                        <tr *ngFor="let note of clientNotes">
                            <td>
                                <div class="row log-info">
                                    <div class="large-12 columns">
                                        <div class="pull-left"> {{ settings.convertToViewDateTime(note.creation_date) }} </div>
                                        <div class="pull-right">{{ 'BY' | translate }} {{ note.created_by }}</div>
                                    </div>
                                </div>
                                {{ note.message }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>